## Who am I

This is demo repo is used by Solution Engineers when demo'ing Sentry's [React Native](https://docs.sentry.io/platforms/react-native) SDK's capabilties. 

## Where do I begin 

Please see [INSTALL.md](./Install.md) to get started with the setup.

## What next
* If you are ready to demo:
```
$git clone <this repo>
Edit App.js to add your Sentry's react-native's project's DSN key
$npx @sentry/wizard -i reactNative -p ios android
```
### Above will :
* Launch the [Sentry wizard](https://github.com/getsentry/sentry-wizard) allowing you to link with the correct Sentry react-native project.
* Create `ios/sentry.properties` and `android/sentry.properties`.
### Gotcha: 
At this point, you may get an error like:
* `TypeError [ERR_INVALID_ARG_TYPE]: The "data" argument must be of type string or an instance of Buffer, TypedArray, or DataView. Received undefined

From my test runs I've noted that it is safe to look past this error. A minor issue is that it blocks creation of `ios/sentry.properties`. So simply make a copy of `android/sentry.properties` and put it in `ios/sentry.properties`

```
cp android/sentry.properties ios/sentry.properties
cd ios
pod install
```

### To Launch the Demo apps:

* _iOS  version_: `npx react-native run-ios --configuration Release`
* _Android version_: `npx react-native run-android --variant Release`

## Why so many files

Actually, its so not that many :-) . The size of this repo is approx. 1.3MB while the size of the [original react-native](https://github.com/sentry-demos/react-native) is approx 350MB. 

Please see [Steps](#what-were-the-steps-again) or go through the [first ten commits](https://github.com/sentry-demos/sentry_react_native/commits/master) (and their git log) messages in chronological order, to see the exact commands that were run and what files that were autogenerated.

Please know that react-native generates it own [.gitignore file](https://stackoverflow.com/questions/49099131/recommended-gitignore-for-react-native/49099219
), which is of course part of this repo, so only those [autogenerated files](https://stackoverflow.com/questions/48448426/why-dont-we-gitignore-ios-and-android-in-react-native ) that are required for a baseline setup and the original demo code (files) are part of this repo. 

So now we are at point, where one can simply clone, make a few edits and like DSN, project name, auth token and be up and running.

## Where's the "original" code

Adam worked on App.js which I took as-is from him. I also got from him the 2 image files in the assets dir (which are also present in [original react-native repo ]( https://github.com/sentry-demos/react-native)

## What else 

It appears to me that we wanted to start fresh to create this demo. And while this was a good learning excercise as we expand our demo offering, I would like to "learn/see" how far off was the [original react-native repo ]( https://github.com/sentry-demos/react-native/commit/269f58d63426065a4de67a3f22d2e774787cd996)

Since the assets are taken from there, and that it has its own App.js, it makes me wonder that a part/whole of it should already be working. I will investigate that as time permits. 

### Update

So I took the major files from this working demo viz. `package.json`, `package-lock.json`, `ios/Podfile`, `ios/Podfile.lock`, because it is such files that make the deliverable self-contained, amongst other changes like DSN. When I put them on top of [original react-native repo ]( https://github.com/sentry-demos/react-native/commit/269f58d63426065a4de67a3f22d2e774787cd996) , I am get comile errors for both ios and android versions. 

At this time, I propose, we use this very repo (sentry_react_native) as the new working demo for RN stuff and forget about making them work on TOP of [original react-native repo](https://github.com/sentry-demos/react-native) . That to me is now a hacker's or pure development exercise.

## What were the steps again

This is just the background steps to answer "How did we get here ?" . Below is not needed/related to the demoing this app.
```
npx react-native init sentry_react_native (where sentry_react_native is the project name) This generates the boiler plate code for the RN app
cd sentry_react_native
git init (Turn folder into a git repo)
cd ios
Edit Podfile to remove/comment out flipper install as suggested in the comments of the file itself
pod install
``` 

Throw in your changes
```
cd ..
Make any code changes you need to such as App.js
```

Throw in Sentry SDKs
```
npm install --save @sentry/react-native
npx @sentry/wizard -i reactNative -p ios android (and select you Sentry react native project )
cd ios
pod install
cd ..
```
Ran git commit along the way and finally pushed to this repo.

